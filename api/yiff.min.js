// @ts-nocheck
export default async function handler(t,e){const{postId:s}=t.query;if(!s)return e.status(400).json({error:"Post ID not specified!"});const r=`https://e621.net/posts/${s}.json`;try{const[t]=await Promise.all([fetch(r)]),s=await t.json(),o=s?.post?.[0];if(o.file.url){const t=await fetch(o.file.url),s=t.headers.get("content-type"),r=await t.arrayBuffer();return e.setHeader("Content-Type",s),e.setHeader("Access-Control-Allow-Origin","*"),e.status(200).send(Buffer.from(r))}return e.status(404).json({error:"Post data not found"})}catch(t){e.status(500).json({error:"Failed to fetch from E621",details:t.message}),document.href=r}}